<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–ª–∞–Ω Berezivka ‚öîÔ∏è</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
/* === –ó–∞–≥–∞–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ === */
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#f0f2f5; color:#222;}
.container { max-width:1200px; margin:0 auto; padding:20px;}
h1 {text-align:center; color:#1f4e78; margin:20px 0;}
button {padding:15px 25px; font-size:18px; border:none; border-radius:6px; background:#1f4e78; color:white; cursor:pointer; margin:10px;}
button:hover {background:#145290;}

/* === –ö–Ω–æ–ø–∫–∏ –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π === */
.buttons {text-align:center; margin-top:50px;}

/* === –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Ñ–æ—Ä–º–∏ === */
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
.modal-content { background:#fff; padding:30px; border-radius:12px; max-width:600px; width:90%; max-height:90%; overflow-y:auto; }
.close { float:right; font-size:24px; cursor:pointer; color:#333; }

/* === –§–æ—Ä–º–∏ === */
form label {display:block; margin-top:10px; font-weight:bold;}
form input, form textarea {width:100%; padding:10px; margin-top:5px; border-radius:6px; border:1px solid #ccc; font-size:16px;}
form button {width:100%; margin-top:20px;}

/* === –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ === */
.admin-panel {display:none; margin-top:40px;}
.admin-panel h2 {text-align:center; color:#1f4e78;}
table {width:100%; border-collapse:collapse; margin-top:20px;}
table, th, td {border:1px solid #ccc;}
th, td {padding:10px; text-align:left;}

/* === –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å === */
@media(max-width:768px){
  .modal-content {padding:20px;}
  button {width:90%; font-size:16px;}
}
</style>
</head>
<body>

<div class="container">
<h1>–ö–ª–∞–Ω Berezivka ‚öîÔ∏è</h1>

<div class="buttons">
  <button id="openFormBtn">–ü–æ–¥–∞—Ç–∏ –∑–∞—è–≤–∫—É ‚öîÔ∏è</button>
  <button onclick="alert('–¢—É—Ç –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ —ñ–Ω—à—ñ –∫–Ω–æ–ø–∫–∏')">–ü—Ä–æ –∫–ª–∞–Ω</button>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Ñ–æ—Ä–º–∏ -->
<div class="modal" id="formModal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <h2>–§–æ—Ä–º–∞ –≤—Å—Ç—É–ø—É –≤ –∫–ª–∞–Ω ‚öîÔ∏è</h2>
    <form id="clanForm">
      <label>üë§ 1. –ù—ñ–∫ —É –≥—Ä—ñ:</label><input type="text" name="nickname" required>
      <label>üÜî 2. ID:</label><input type="text" name="id" required>
      <label>üéÇ 3. –í—ñ–∫:</label><input type="number" name="age" required>
      <label>üåç 4. –ß–∞—Å–æ–≤–∏–π –ø–æ—è—Å / –º—ñ—Å—Ç–æ:</label><input type="text" name="timezone" required>
      <label>‚è∞ 5. –°–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –ø—Ä–æ–≤–æ–¥–∏—à —É –≥—Ä—ñ —â–æ–¥–Ω—è:</label><input type="text" name="daily_time" required>
      <label>üìÖ 6. –°–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –≥—Ä–∞—î—à –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:</label><input type="text" name="server_time" required>
      <label>üè∞ 7. –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫–ª–∞–Ω–∏ (—è–∫—â–æ –±—É–ª–∏):</label><input type="text" name="previous_clans">
      <label>üö™ 8. –ü—Ä–∏—á–∏–Ω–∞ –≤–∏—Ö–æ–¥—É –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∫–ª–∞–Ω—É:</label><textarea name="leave_reason"></textarea>
      <label>‚ú® 9. –ß–æ–º—É —Ö–æ—á–µ—à –≤—Å—Ç—É–ø–∏—Ç–∏ —Å–∞–º–µ –¥–æ –Ω–∞—à–æ–≥–æ –∫–ª–∞–Ω—É:</label><textarea name="reason_to_join" required></textarea>
      <label>üí™ 10. –ß–∏–º –≥–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–∞–≥–∞—Ç–∏ –∫–ª–∞–Ω—É:</label><textarea name="contribution" required></textarea>
      <label>üìè 11. –°—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–æ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏ —Ç–∞ –ø—Ä–∞–≤–∏–ª:</label><textarea name="discipline" required></textarea>
      <label>üéôÔ∏è 12. –ß–∏ —î –º—ñ–∫—Ä–æ—Ñ–æ–Ω —Ç–∞ Discord:</label><input type="text" name="voice_discord" required>
      <label>üì¢ 13. –ß–∏ –≥–æ—Ç–æ–≤–∏–π –≤–∏—Ö–æ–¥–∏—Ç–∏ –Ω–∞ –∑–±–æ—Ä–∏ –∫–ª–∞–Ω—É:</label><input type="text" name="attend_meetings" required>
      <label>üìñ 14. –ù–∞—Å–∫—ñ–ª—å–∫–∏ –¥–æ–±—Ä–µ –∑–Ω–∞—î—à –ø—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä—É (1‚Äì10):</label><input type="number" name="server_knowledge" min="1" max="10" required>
      <label>üéØ 15. –Ø–∫—ñ –Ω–∞–≤–∏—á–∫–∏ –º–∞—î—à —É –≥—Ä—ñ:</label><textarea name="skills" required></textarea>
      <label>üõ°Ô∏è 16. –ß–∏ –≥–æ—Ç–æ–≤–∏–π –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –≤–∫–∞–∑—ñ–≤–∫–∏ —Å—Ç–∞—Ä—à–∏—Ö:</label><input type="text" name="follow_instructions" required>
      <label>üöó 17. –ß–∏ —î –∞–≤—Ç–æ/–±—ñ–∑–Ω–µ—Å, —è–∫–∏–º –º–æ–∂–µ—à –¥–æ–ø–æ–º–∞–≥–∞—Ç–∏:</label><input type="text" name="resources" required>
      <label>‚ö†Ô∏è 18. –ß–∏ –±—É–≤ –±–∞–Ω/–≤–∞—Ä–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:</label><input type="text" name="bans" required>
      <label>ü§ù 19. –ß–∏ –≥–æ—Ç–æ–≤–∏–π –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ –∫–æ–º–∞–Ω–¥—ñ:</label><input type="text" name="teamwork" required>
      <label>üìù 20. –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å–µ–±–µ:</label><textarea name="extra_info"></textarea>
      <button type="submit">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞—è–≤–∫—É</button>
    </form>
  </div>
</div>

<!-- –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
<div class="admin-panel" id="adminPanel">
<h2>–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –∫–ª–∞–Ω—É</h2>
<table id="applicationsTable">
<tr>
<th>–ù—ñ–∫</th><th>ID</th><th>–í—ñ–∫</th><th>–ú—ñ—Å—Ç–æ</th><th>–ß–∞—Å —É –≥—Ä—ñ</th><th>–ü—Ä–∏—á–∏–Ω–∞</th><th>–î–æ–ø–æ–º–æ–≥–∞</th><th>–î—ñ—ó</th>
</tr>
</table>
</div>

</div>

<script>
// === Firebase –∫–æ–Ω—Ñ—ñ–≥ ===
const firebaseConfig = {
  apiKey: "–í–ê–®_API_KEY",
  authDomain: "–í–ê–®_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://–í–ê–®_PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "–í–ê–®_PROJECT_ID",
  storageBucket: "–í–ê–®_PROJECT_ID.appspot.com",
  messagingSenderId: "–í–ê–®_SENDER_ID",
  appId: "–í–ê–®_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const auth = firebase.auth();

// === –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ ===
const modal = document.getElementById("formModal");
document.getElementById("openFormBtn").onclick = ()=>modal.style.display="flex";
document.getElementById("closeModal").onclick = ()=>modal.style.display="none";
window.onclick = e => { if(e.target==modal) modal.style.display="none"; }

// === –õ–æ–≥—ñ–Ω –¥–ª—è –∞–¥–º—ñ–Ω–∞ ===
auth.onAuthStateChanged(user=>{
  if(user && user.email==="bodrosik@gmail.com"){
    document.getElementById("adminPanel").style.display="block";
    loadApplications();
  } else { document.getElementById("adminPanel").style.display="none"; }
});
function loginAdmin(){ const provider=new firebase.auth.GoogleAuthProvider(); auth.signInWithPopup(provider); }
loginAdmin(); // –∞–≤—Ç–æ–ª–æ–≥—ñ–Ω

// === –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º–∏ ===
document.getElementById("clanForm").addEventListener("submit", function(e){
  e.preventDefault();
  const data={}; new FormData(this).forEach((v,k)=>data[k]=v); data.timestamp=Date.now();
  db.ref("applications").push(data)
    .then(()=>{alert("–ó–∞—è–≤–∫–∞ –Ω–∞–¥—ñ—Å–ª–∞–Ω–∞!"); this.reset(); modal.style.display="none";})
    .catch(err=>alert("–ü–æ–º–∏–ª–∫–∞: "+err));
});

// === –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞—è–≤–æ–∫ –¥–ª—è –∞–¥–º—ñ–Ω–∞ ===
function loadApplications(){
  const table = document.getElementById("applicationsTable");
  db.ref("applications").on("value", snapshot=>{
    table.innerHTML=`<tr>
      <th>–ù—ñ–∫</th><th>ID</th><th>–í—ñ–∫</th><th>–ú—ñ—Å—Ç–æ</th><th>–ß–∞—Å —É –≥—Ä—ñ</th><th>–ü—Ä–∏—á–∏–Ω–∞</th><th>–î–æ–ø–æ–º–æ–≥–∞</th><th>–î—ñ—ó</th>
    </tr>`;
    snapshot.forEach(child=>{
      const app=child.val();
      const row=table.insertRow();
      row.insertCell(0).innerText=app.nickname;
      row.insertCell(1).innerText=app.id;
      row.insertCell(2).innerText=app.age;
      row.insertCell(3).innerText=app.timezone;
      row.insertCell(4).innerText=app.daily_time;
      row.insertCell(5).innerText=app.reason_to_join;
      row.insertCell(6).innerText=app.contribution;
      const actionCell=row.insertCell(7);
      const delBtn=document.createElement("button");
      delBtn.innerText="–í–∏–¥–∞–ª–∏—Ç–∏";
      delBtn.onclick=()=>db.ref("applications/"+child.key).remove();
      actionCell.appendChild(delBtn);
    });
  });
}
</script>

</body>
</html>
